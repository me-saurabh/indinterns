!function(n){var s;"undefined"!=typeof wc_price_based_country_ajax_geo_params&&(s={xhr:!1,get_product_ids:function(){var a=[],e=null;return n("span.wcpbc-price.loading").each(function(){var r;void 0===(e=n(this).data("productId"))&&null!=(r=n(this).attr("class").match(/wcpbc-price-\d+/))&&0<r.length&&(e=parseInt(r[0].replace("wcpbc-price-",""))),e&&void 0!==e&&a.push(e)}),0<n(".variations_form").length&&n(".variations_form").each(function(){var r=n(this).data("product_variations");null!=r&&n.each(r,function(r,e){void 0!==e.variation_id&&a.push(e.variation_id)})}),n(document.body).trigger("wc_price_based_country_get_product_ids",[a]),a.sort(),a},get_areas:function(){var i={};return n(".wc-price-based-country-refresh-area:not(.refreshed)").each(function(r,e){var a=n(e).data("area"),c=n(e).data("id"),e=n(e).data("options");void 0!==a&&void 0!==c&&void 0!==e&&(void 0===i[a]&&(i[a]={}),i[a][c]=e)}),i},refresh_product_price:function(o){var a;n.each(o,function(r,e){void 0!==(a=n("<div>"+e.price_html+"</div>").find(".wcpbc-price.wcpbc-price-"+e.id+":first"))&&n(".wcpbc-price.wcpbc-price-"+e.id).html(a.html()).removeClass("loading")}),0<n(".variations_form").length&&n(".variations_form").each(function(){var i=n(this).data("product_variations"),t=n(this);null!=i&&(n.each(i,function(r,e){var a,c;void 0!==o[e.variation_id]&&(c=n(e.price_html),i[r].display_price=o[e.variation_id].display_price,i[r].display_regular_price=o[e.variation_id].display_regular_price,0<c.length?c=c.hasClass("price")?((a=n("<div></div>").append(c)).find(".price").html(o[e.variation_id].price_html),n(a.html())):n(o[e.variation_id].price_html):n("body").hasClass("single-product")||(c=s.compatibility.variation_price_html(c,t,o[e.variation_id].price_html)),0<c.length&&(c.find(".wcpbc-price").css("visibility",""),c.find(".wcpbc-price").removeClass("loading"),c=n("<div></div>").append(c),i[r].price_html=c.html()))}),n(this).data("product_variations",i))}),n(document.body).trigger("wc_price_based_country_set_product_price",[o]),n(".wcpbc-price").css("visibility",""),n(".wcpbc-price").css("display",""),n(".wcpbc-price").removeClass("loading")},refresh_areas:function(r){n.each(r,function(r,e){var a='.wc-price-based-country-refresh-area[data-id="'+e.id+'"][data-area="'+e.area+'"]',e=n("<div>"+e.content+"</div>").find('.wc-price-based-country-refresh-area[data-area="'+e.area+'"]').html();n(a).html(e).addClass("refreshed")}),n(document.body).trigger("wc_price_based_country_refresh_areas",[r])},refresh_currency_settings:function(r){var e,a;"undefined"!=typeof woocommerce_price_slider_params&&"undefined"!=typeof accounting&&(e=n(".price_slider_amount #min_price").data("min"),a=n(".price_slider_amount #max_price").data("max"),n(".price_slider_amount span.from").html(accounting.formatMoney(e,{symbol:r.symbol,decimal:r.decimal_sep,thousand:r.thousand_sep,precision:woocommerce_price_slider_params.currency_format_num_decimals,format:r.format})),n(".price_slider_amount span.to").html(accounting.formatMoney(a,{symbol:r.symbol,decimal:r.decimal_sep,thousand:r.thousand_sep,precision:woocommerce_price_slider_params.currency_format_num_decimals,format:r.format})),woocommerce_price_slider_params.currency_format_symbol=r.symbol,woocommerce_price_slider_params.currency_format_decimal_sep=r.decimal_sep,woocommerce_price_slider_params.currency_format_thousand_sep=r.thousand_sep,woocommerce_price_slider_params.currency_format=r.format),n(document.body).trigger("wc_price_based_country_set_currency_params",[r])},compatibility:{variation_price_html:function(r,e,a){return r=r.length<=0&&e.hasClass("wvs-archive-variation-wrapper")?n("<span></span>").append(a):r},bind:function(){0<n(".wc-price-based-country-refresh-area .wcsatt-options-wrapper").length&&(n(".wc-price-based-country-refresh-area .wcsatt-options-wrapper").each(function(){var r=n(this).closest(".wc-price-based-country-refresh-area").data("id");n(this).addClass("wcpbc-refresh-flag wcpbc-refresh-flag-"+r)}),n(document.body).on("wc_price_based_country_refresh_areas",function(){n(".wcsatt-options-wrapper.wcpbc-refresh-flag").length&&n(".wc-price-based-country-refresh-area .wcsatt-options-wrapper").each(function(){var r=n(this).closest(".wc-price-based-country-refresh-area").data("id"),e=n(this).closest(".wc-price-based-country-refresh-area").html();n(".wcsatt-options-wrapper.wcpbc-refresh-flag-"+r).replaceWith(e),n(this).remove()}),n(".product form.cart").each(function(){n(this).data("satt_script",null)}),n(document.body).triggerHandler("wcsatt-initialize")})),0<n(".variations_form.cart").length&&0<n('[class^="wcsatt"]').length&&n(document.body).on("wc_price_based_country_set_product_price",function(){0<n(".variations_form.cart .wcsatt-options-wrapper").length&&n(".variations_form.cart .variations select").trigger("change.wc-variation-form")}),n(".skeleton-loading").length&&n(".skeleton-loading").on("skeleton-loaded",function(){n(document.body).trigger("wc_price_based_country_ajax_geolocation")}),n(".wvs-archive-variations-wrapper").length&&(n(".wvs-archive-variations-wrapper").removeClass("wvs-archive-variations-wrapper").addClass("wcpbc-wvs-archive-variations-wrapper"),n(document.body).on("wc_price_based_country_after_ajax_geolocation",function(){n(".wcpbc-wvs-archive-variations-wrapper").removeClass("wcpbc-wvs-archive-variations-wrapper").addClass("wvs-archive-variations-wrapper"),n(document).trigger("woo_variation_swatches_pro_init")}))}},geolocate_customer:function(){s.xhr&&s.xhr.abort();var r={ids:s.get_product_ids(),areas:s.get_areas(),is_single:n("body").hasClass("single")?"1":"0"};0===r.ids.length&&n.isEmptyObject(r.areas)&&0===n(".wcpbc-content:not(.refreshed)").length||(s.xhr=n.ajax({url:wc_price_based_country_ajax_geo_params.wc_ajax_url.toString().replace("%%endpoint%%","wcpbc_get_location"),data:r,type:"POST",success:function(r){s.refresh_product_price(r.products),s.refresh_areas(r.areas),s.refresh_currency_settings(r.currency_params),n(document.body).trigger("wc_price_based_country_after_ajax_geolocation",[r.zone_id])},error:function(r,e){"abort"!==e&&(n(".wcpbc-price").css("visibility",""),n(".wcpbc-price").css("display",""),n(".wcpbc-price").removeClass("loading"))},complete:function(){s.xhr=!1}}))},infinite_scroll:function(){if(!n("body").hasClass("single")){const r=document.body,e={childList:!0,subtree:!0},a=new MutationObserver(function(){n(".wcpbc-price.loading").length&&(a.disconnect(),n(document.body).triggerHandler("wc_price_based_country_ajax_geolocation"))});n(document.body).on("wc_price_based_country_after_ajax_geolocation",function(){a.observe(r,e)})}},init:function(){n(document.body).on("wc_price_based_country_ajax_geolocation",s.geolocate_customer),this.compatibility.bind(),this.infinite_scroll(),this.geolocate_customer()}}).init()}(jQuery);