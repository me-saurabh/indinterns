!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}jQuery(document).ready((function(e){var i="job_listing_";function n(t){return!(!window.sessionStorage||"function"!=typeof window.sessionStorage.setItem||e(document.body).hasClass("disable-job-manager-form-state-storage")||t.data("disable-form-state-storage"))}function o(t){var n=e("div.job_listings").index(t),o=t.data("post_id");return void 0!==o&&o||(o=window.location.href.replace(location.hash,"")),i+o+"_"+n}function a(e,i){if(!n(e))return!1;"object"!==t(i)&&(i={});var a=o(e);try{return window.sessionStorage.setItem(a,JSON.stringify(i))}catch(t){}return!1}function r(t){if(!n(t))return!1;var e=o(t);try{var i=window.sessionStorage.getItem(e);if(i)return JSON.parse(i)}catch(t){}return!1}function s(t,e){if(!n(t)||!t)return!1;var i=r(t);return!!i&&(i.persist_results=e,a(t,i))}function l(t){if(!n(t)||!t)return!1;var e=r(t);if(!e)return!1;var i=t.find(".job_filters");return e.form=i.serialize(),a(t,e)}function d(t,i,n){var o=t.find(".job_listings"),a=t.find(".showing_jobs");if("boolean"!=typeof n&&(n=!1),"string"==typeof i.showing&&i.showing){var r=jQuery("<span>").html(i.showing);a.show().html("").html(i.showing_links).prepend(r)}else a.hide();return i.showing_all?a.addClass("wp-job-manager-showing-all"):a.removeClass("wp-job-manager-showing-all"),i.html&&(n?o.append(i.html):o.html(i.html)),!0===t.data("show_pagination")?(t.find(".job-manager-pagination").remove(),i.pagination&&t.append(i.pagination)):(!i.found_jobs||i.max_num_pages<=i.data.page?e(".load_more_jobs:not(.load_previous)",t).hide():e(".load_more_jobs",t).show(),e(".load_more_jobs",t).removeClass("loading").data("page",i.data.page),e("li.job_listing",o).css("visibility","visible")),!0}e(document).on("click","a",(function(){e("div.job_listings").each((function(){l(e(this))}))})),e(document).on("submit","form",(function(){e("div.job_listings").each((function(){l(e(this))}))}));var c=[];function u(){var t=e(this).closest("div.job_listings");t.triggerHandler("update_results",[1,!1]),a(t)}e("div.job_listings").on("click","li.job_listing a",(function(){s(e(this).closest("div.job_listings"),!0)})).on("click",".job-manager-pagination a",(function(){var t=e(this).closest("div.job_listings"),i=e(this).data("page");return t.triggerHandler("update_results",[i,!1]),e("body, html").animate({scrollTop:t.offset().top},600),!1})).on("update_results",(function(t,i,s){var l,u,g,_="",f=e(this),p=f.find(".job_filters"),h=f.find(".job_listings"),m=f.data("per_page"),b=f.data("orderby"),j=f.data("order"),v=f.data("featured"),y=f.data("filled"),w=f.data("remote_position"),k=f.data("job_types"),S=f.data("post_status"),x=e("div.job_listings").index(this);if(!(x<0)){if(function(t){if(!n(t))return!1;var e=o(t);try{window.sessionStorage.removeItem(e)}catch(t){return!1}}(f),c[x]&&c[x].abort(),s&&1!==i||(e("li.job_listing, li.no_job_listings_found",h).css("visibility","hidden"),h.addClass("loading")),f.find(".load_more_jobs").data("page",i),!0===f.data("show_filters")){var C=[];e(':input[name="filter_job_type[]"]:checked, :input[name="filter_job_type[]"][type="hidden"], :input[name="filter_job_type"]',p).each((function(){C.push(e(this).val())})),l=p.find(':input[name^="search_categories"]').map((function(){return e(this).val()})).get(),u="",g="";var H=p.find(':input[name="search_keywords"]'),I=p.find(':input[name="search_location"]'),O=p.find(':input[name="remote_position"]');H.val()!==H.attr("placeholder")&&(u=H.val()),I.val()!==I.attr("placeholder")&&(g=I.val()),O.length&&(w=O.is(":checked")?"true":null),_={lang:job_manager_ajax_filters.lang,search_keywords:u,search_location:g,search_categories:l,filter_job_type:C,filter_post_status:S,per_page:m,orderby:b,order:j,page:i,featured:v,filled:y,remote_position:w,show_pagination:f.data("show_pagination"),form_data:p.serialize()}}else l=f.data("categories"),u=f.data("keywords"),g=f.data("location"),l&&("string"!=typeof l&&(l=String(l)),l=l.split(",")),_={lang:job_manager_ajax_filters.lang,search_categories:l,search_keywords:u,search_location:g,filter_post_status:S,filter_job_type:k,per_page:m,orderby:b,order:j,page:i,featured:v,filled:y,remote_position:w,show_pagination:f.data("show_pagination")};c[x]=e.ajax({type:"POST",url:job_manager_ajax_filters.ajax_url.toString().replace("%%endpoint%%","get_listings"),data:_,success:function(t){if(t)try{t.data=_,d(f,t,s),h.removeClass("loading"),f.triggerHandler("updated_results",t),function(t,e){if(!n(t))return!1;var i=r(t);i||(i={persist_results:!1});var o=t.find(".job_listings");e.html=o.html(),i.results=e,a(t,i)}(f,t)}catch(t){window.console&&window.console.log(t)}},error:function(t,e,i){window.console&&"abort"!==e&&window.console.log(e+": "+i)},statusCode:{404:function(){window.console&&window.console.log("Error 404: Ajax Endpoint cannot be reached. Go to Settings > Permalinks and save to resolve.")}}})}})),e("#search_keywords, #search_location, #remote_position, .job_types :input, #search_categories, .job-manager-filter").change(u).on("keyup",(function(t){13===t.which&&e(this).trigger("change")})),e(".job_filters").on("click",".reset",(function(){var t=e(this).closest("div.job_listings"),i=e(this).closest("form");return i.find(':input[name="search_keywords"], :input[name="search_location"], .job-manager-filter').not(':input[type="hidden"]').val("").trigger("change.select2"),i.find(':input[name^="search_categories"]').not(':input[type="hidden"]').val("").trigger("change.select2"),i.find(':input[name="filter_job_type[]"]').not(':input[type="hidden"]').prop("checked",!0),i.find(':input[name="remote_position"]').not(':input[type="hidden"]').prop("checked",!1),t.triggerHandler("reset"),t.triggerHandler("update_results",[1,!1]),a(t),!1})).on("submit",(function(){var t=e(this).closest("div.job_listings"),i=e("div.job_listings").index(t);return c[i]&&-1!==[0,4].indexOf(c[i].readyState)&&u.call(this),!1})),e(document.body).on("click",".load_more_jobs",(function(){var t=e(this).closest("div.job_listings"),i=parseInt(e(this).data("page")||1,10);return e(this).addClass("loading"),i+=1,e(this).data("page",i),t.triggerHandler("update_results",[i,!0]),!1})),e.isFunction(e.fn.select2)&&"undefined"!=typeof job_manager_select2_filters_args&&e('select[name^="search_categories"]:visible').select2(job_manager_select2_filters_args),e(window).on("unload",(function(){return e("div.job_listings").each((function(){var t=r(e(this));t&&!t.persist_results&&function(t){if(!n(t))return!1;var e=r(t);e||(e={}),e.results=null,a(t,e)}(e(this))})),!0})),e("div.job_listings").each((function(){var t=e(this),i=t.find(".job_filters"),o=!1,l=r(t);l&&(l.results&&(o=d(t,l.results),s(t,!1),function(t){if(!n(t))return!1;var e=r(t);e||(e={}),e.form=null,a(t,e)}(t)),"string"==typeof l.form&&""!==l.form&&(i.find("input[type=checkbox]").prop("checked",!1),i.deserialize(l.form),i.find(':input[name^="search_categories"]').not(':input[type="hidden"]').trigger("change.select2"))),!o&&i.length>0&&t.triggerHandler("update_results",[1,!1])}))}))}();